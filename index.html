<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>í‚¤ì›Œë“œ í†µê³„ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        font-family: "Noto Sans KR", sans-serif;
        background-color: #f4f6f9;
        margin: 0;
        padding: 0;
        color: #333;
      }

      header {
        background-color: #2f3542;
        color: #fff;
        padding: 20px 40px;
      }

      header h1 {
        margin: 0;
        font-size: 22px;
      }

      .container {
        max-width: 1000px;
        margin: 30px auto;
        padding: 0 20px;
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.08);
        padding-bottom: 40px;
      }

      .controls {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 16px;
        padding: 20px;
        border-bottom: 1px solid #eee;
      }

      .controls label {
        font-weight: 500;
      }

      .controls select,
      .controls input[type="date"],
      .controls button {
        padding: 6px 10px;
        font-size: 14px;
        border: 1px solid #ccc;
        border-radius: 6px;
      }

      .controls button {
        background-color: #2ed573;
        color: white;
        cursor: pointer;
        transition: background 0.2s ease;
      }

      .controls button:hover {
        background-color: #1dd1a1;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 24px 0;
      }

      table thead {
        background-color: #f1f2f6;
      }

      th,
      td {
        text-align: center;
        padding: 12px 10px;
        border-bottom: 1px solid #eee;
        font-size: 14px;
      }

      th {
        font-weight: 600;
        color: #555;
      }

      tbody tr:nth-child(even) {
        background-color: #fafafa;
      }

      #chart-container {
        margin: 40px auto 0;
        max-width: 800px;
      }

      @media screen and (max-width: 768px) {
        .controls {
          flex-direction: column;
          align-items: flex-start;
        }

        table,
        thead,
        tbody,
        th,
        td,
        tr {
          font-size: 13px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>ğŸ” í‚¤ì›Œë“œ ê²€ìƒ‰ í†µê³„ ëŒ€ì‹œë³´ë“œ</h1>
    </header>

    <div class="container">
      <div class="controls">
        <label>
          ê¸°ì¤€ì¼:
          <select id="rangeSelect">
            <option value="1">1ì¼</option>
            <option value="3">3ì¼</option>
            <option value="7" selected>7ì¼</option>
            <option value="30">30ì¼</option>
            <option value="all">ì „ì²´</option>
          </select>
        </label>

        <label>
          ì¢…ë£Œì¼:
          <input type="date" id="endDate" value="2025-04-18" />
        </label>

        <button onclick="loadData()">ì¡°íšŒ</button>
      </div>

      <table id="keywordTable">
        <thead>
          <tr>
            <th>ìˆœìœ„</th>
            <th>í‚¤ì›Œë“œ</th>
            <th>ê²€ìƒ‰ íšŸìˆ˜</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <div id="chart-container">
        <canvas id="keywordChart"></canvas>
      </div>
    </div>

    <script>
      const dummyData = [
        { keyword: "ë©˜í† ", count: 134 },
        { keyword: "AI", count: 97 },
        { keyword: "ì¸ê³µì§€ëŠ¥", count: 80 },
        { keyword: "ì§€ì›", count: 75 },
        { keyword: "í”„ë¡œì íŠ¸", count: 62 },
        { keyword: "ì‚°í•™", count: 58 },
        { keyword: "ì¸í„´", count: 55 },
        { keyword: "ì»¨ì„¤íŒ…", count: 51 },
        { keyword: "ì „ë¬¸ê°€", count: 50 },
        { keyword: "R&D", count: 48 },
      ];

      function loadData() {
        const range = document.getElementById("rangeSelect").value;
        const endDate = document.getElementById("endDate").value;

        // "ì „ì²´" ì„ íƒ ì‹œ í•„í„° ì—†ì´ ì „ì²´ ë°ì´í„° ì‚¬ìš©
        let filtered = dummyData;

        // ì˜ˆ: ì‹¤ì œ í•„í„°ë§ ì ìš© (ì´ê±´ ë‚˜ì¤‘ì— ì„œë²„ ì¿¼ë¦¬ë¡œ ì²˜ë¦¬)
        if (range !== "all") {
          console.log(`ì¡°íšŒ ê¸°ê°„: ${range}ì¼, ì¢…ë£Œì¼: ${endDate}`);
          // ì´ê³³ì—ì„œ ì‹¤ì œ í•„í„°ë§ API í˜¸ì¶œí•˜ê±°ë‚˜, í•„í„° ì¡°ê±´ ì²˜ë¦¬ ê°€ëŠ¥
        }

        const tbody = document.querySelector("#keywordTable tbody");
        tbody.innerHTML = "";

        filtered.forEach((item, index) => {
          const row = document.createElement("tr");
          row.innerHTML = `<td>${index + 1}</td><td>${item.keyword}</td><td>${
            item.count
          }</td>`;
          tbody.appendChild(row);
        });

        drawChart(filtered);
      }

      function drawChart(data) {
        const ctx = document.getElementById("keywordChart").getContext("2d");
        if (window.keywordChart) {
          window.keywordChart.destroy();
        }

        window.keywordChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: data.map((d) => d.keyword),
            datasets: [
              {
                label: "ê²€ìƒ‰ íšŸìˆ˜",
                data: data.map((d) => d.count),
                backgroundColor: "#70a1ff",
                borderRadius: 5,
              },
            ],
          },
          options: {
            responsive: true,
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  precision: 0,
                },
              },
            },
          },
        });
      }

      document
        .getElementById("rangeSelect")
        .addEventListener("change", function () {
          const endDateInput = document.getElementById("endDate");
          if (this.value === "all") {
            endDateInput.disabled = true;
          } else {
            endDateInput.disabled = false;
          }
        });

      window.onload = loadData;
    </script>
  </body>
</html>
